# @dreamer/logger å®¢æˆ·ç«¯ä½¿ç”¨æ–‡æ¡£

> ä¸“ä¸ºæµè§ˆå™¨ç¯å¢ƒè®¾è®¡çš„è½»é‡çº§æ—¥å¿—ç®¡ç†å™¨

---

## ğŸ¯ åŠŸèƒ½

å®¢æˆ·ç«¯æ—¥å¿—ç®¡ç†å™¨ï¼Œä¸“ä¸ºæµè§ˆå™¨ç¯å¢ƒè®¾è®¡ï¼Œä½¿ç”¨ console API è¾“å‡ºæ—¥å¿—ï¼Œæä¾›å¤šçº§åˆ«æ—¥å¿—ã€å½©è‰²è¾“å‡ºã€è°ƒè¯•æ¨¡å¼æ§åˆ¶ç­‰åŠŸèƒ½ã€‚

---

## ğŸ“¦ å®‰è£…

### æµè§ˆå™¨ç¯å¢ƒ

åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å®¢æˆ·ç«¯æ—¥å¿—åŒ…ï¼š

```typescript
import { createLogger, Logger } from "jsr:@dreamer/logger/client";
```


---

## ğŸŒ ç¯å¢ƒå…¼å®¹æ€§

| ç¯å¢ƒ | ç‰ˆæœ¬è¦æ±‚ | çŠ¶æ€ |
|------|---------|------|
| **æµè§ˆå™¨** | ç°ä»£æµè§ˆå™¨ | âœ… å®Œå…¨æ”¯æŒ |
| **Deno** | 2.5.0+ | âœ… æ”¯æŒï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰ |
| **Bun** | 1.3.0+ | âœ… æ”¯æŒï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰ |

---

## âœ¨ ç‰¹æ€§

- **å¤šçº§åˆ«æ—¥å¿—**ï¼š
  - debugã€infoã€warnã€errorã€fatal äº”ä¸ªçº§åˆ«
  - æ—¥å¿—çº§åˆ«æ§åˆ¶ï¼Œå¯åŠ¨æ€è°ƒæ•´
- **å½©è‰²æ—¥å¿—è¾“å‡º**ï¼š
  - ä¸åŒçº§åˆ«ä½¿ç”¨ä¸åŒé¢œè‰²å’Œå›¾æ ‡
  - æ”¯æŒæµè§ˆå™¨æ§åˆ¶å° CSS æ ·å¼
  - å¯æ‰‹åŠ¨ç¦ç”¨é¢œè‰²
- **ç¾åŒ–çš„æ—¥å¿—æ ¼å¼**ï¼š
  - å›¾æ ‡æ ‡è¯†ï¼ˆğŸ” debugã€â„¹ï¸ infoã€âš ï¸ warnã€âŒ errorã€ğŸ’€ fatalï¼‰
  - æ—¶é—´æˆ³æ”¯æŒï¼ˆå¯é€‰ï¼‰
  - æ—¥å¿—å‰ç¼€æ”¯æŒ
- **è°ƒè¯•æ¨¡å¼æ§åˆ¶**ï¼š
  - å¼€å‘ç¯å¢ƒå¯ç”¨ï¼ˆdebug: trueï¼‰è¾“å‡ºæ‰€æœ‰æ—¥å¿—
  - ç”Ÿäº§ç¯å¢ƒç¦ç”¨ï¼ˆdebug: falseï¼‰å®Œå…¨ç¦ç”¨æ—¥å¿—è¾“å‡º
- **è½»é‡çº§è®¾è®¡**ï¼š
  - æ— å¤–éƒ¨ä¾èµ–
  - çº¯ TypeScript å®ç°
  - ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿ console API

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```typescript
import { createLogger } from "jsr:@dreamer/logger/client";

// åˆ›å»ºæ—¥å¿—å™¨
const logger = createLogger({
  level: "info",
  prefix: "[MyApp]",
  color: true,
  debug: true, // å¼€å‘ç¯å¢ƒå¯ç”¨
});

// è®°å½•æ—¥å¿—
logger.debug("è°ƒè¯•ä¿¡æ¯");
logger.info("åº”ç”¨å¯åŠ¨");
logger.warn("è­¦å‘Šä¿¡æ¯");
logger.error("é”™è¯¯ä¿¡æ¯");
logger.fatal("è‡´å‘½é”™è¯¯");
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

```typescript
import { createLogger } from "jsr:@dreamer/logger/client";

// ç”Ÿäº§ç¯å¢ƒï¼šç¦ç”¨æ‰€æœ‰æ—¥å¿—è¾“å‡º
const prodLogger = createLogger({
  debug: false, // ç¦ç”¨æ‰€æœ‰æ—¥å¿—
});

// è¿™äº›æ—¥å¿—éƒ½ä¸ä¼šè¾“å‡º
prodLogger.info("è¿™æ¡æ—¥å¿—ä¸ä¼šè¾“å‡º");
prodLogger.error("è¿™æ¡é”™è¯¯æ—¥å¿—ä¹Ÿä¸ä¼šè¾“å‡º");
```

### å¼€å‘ç¯å¢ƒé…ç½®

```typescript
import { createLogger } from "jsr:@dreamer/logger/client";

// å¼€å‘ç¯å¢ƒï¼šè¾“å‡ºæ‰€æœ‰çº§åˆ«çš„æ—¥å¿—
const devLogger = createLogger({
  level: "debug", // æœ€ä½çº§åˆ«ï¼Œè¾“å‡ºæ‰€æœ‰æ—¥å¿—
  prefix: "[Dev]",
  color: true, // å¯ç”¨å½©è‰²è¾“å‡º
  debug: true, // å¯ç”¨è°ƒè¯•æ¨¡å¼
  timestamp: true, // æ˜¾ç¤ºæ—¶é—´æˆ³
});

devLogger.debug("è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯");
devLogger.info("åº”ç”¨çŠ¶æ€");
```

---

## ğŸ“š API æ–‡æ¡£

### createLogger(config?)

åˆ›å»ºæ—¥å¿—å™¨å®ä¾‹ã€‚

**å‚æ•°**ï¼š

- `config` (å¯é€‰): `LoggerConfig` é…ç½®å¯¹è±¡

**è¿”å›**ï¼š`Logger` å®ä¾‹

**ç¤ºä¾‹**ï¼š

```typescript
const logger = createLogger({
  level: "info",
  prefix: "[MyApp]",
  color: true,
  debug: true,
});
```

### Logger ç±»

#### æ–¹æ³•

##### `debug(message, data?, error?)`

è®°å½•è°ƒè¯•æ—¥å¿—ã€‚

**å‚æ•°**ï¼š
- `message`: `string` - æ—¥å¿—æ¶ˆæ¯
- `data?`: `unknown` - é¢å¤–æ•°æ®ï¼ˆå¯é€‰ï¼‰
- `error?`: `Error` - é”™è¯¯å¯¹è±¡ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š

```typescript
logger.debug("ç”¨æˆ·æ“ä½œ", { userId: "123", action: "click" });
logger.debug("è°ƒè¯•ä¿¡æ¯", null, new Error("æµ‹è¯•é”™è¯¯"));
```

##### `info(message, data?, error?)`

è®°å½•ä¿¡æ¯æ—¥å¿—ã€‚

**å‚æ•°**ï¼š
- `message`: `string` - æ—¥å¿—æ¶ˆæ¯
- `data?`: `unknown` - é¢å¤–æ•°æ®ï¼ˆå¯é€‰ï¼‰
- `error?`: `Error` - é”™è¯¯å¯¹è±¡ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š

```typescript
logger.info("ç”¨æˆ·ç™»å½•", { userId: "123" });
logger.info("æ“ä½œå®Œæˆ");
```

##### `warn(message, data?, error?)`

è®°å½•è­¦å‘Šæ—¥å¿—ã€‚

**å‚æ•°**ï¼š
- `message`: `string` - æ—¥å¿—æ¶ˆæ¯
- `data?`: `unknown` - é¢å¤–æ•°æ®ï¼ˆå¯é€‰ï¼‰
- `error?`: `Error` - é”™è¯¯å¯¹è±¡ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š

```typescript
logger.warn("API å“åº”è¾ƒæ…¢", { duration: 5000 });
logger.warn("èµ„æºä¸è¶³", null, new Error("å†…å­˜ä¸è¶³"));
```

##### `error(message, data?, error?)`

è®°å½•é”™è¯¯æ—¥å¿—ã€‚

**å‚æ•°**ï¼š
- `message`: `string` - æ—¥å¿—æ¶ˆæ¯
- `data?`: `unknown` - é¢å¤–æ•°æ®ï¼ˆå¯é€‰ï¼‰
- `error?`: `Error` - é”™è¯¯å¯¹è±¡ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š

```typescript
logger.error("è¯·æ±‚å¤±è´¥", { url: "/api/users", status: 500 });
logger.error("å¤„ç†å¼‚å¸¸", null, new Error("ç½‘ç»œé”™è¯¯"));
```

##### `fatal(message, data?, error?)`

è®°å½•è‡´å‘½é”™è¯¯æ—¥å¿—ã€‚

**å‚æ•°**ï¼š
- `message`: `string` - æ—¥å¿—æ¶ˆæ¯
- `data?`: `unknown` - é¢å¤–æ•°æ®ï¼ˆå¯é€‰ï¼‰
- `error?`: `Error` - é”™è¯¯å¯¹è±¡ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š

```typescript
logger.fatal("ç³»ç»Ÿå´©æºƒ", { reason: "å†…å­˜æº¢å‡º" });
logger.fatal("è‡´å‘½é”™è¯¯", null, new Error("æ— æ³•æ¢å¤"));
```

##### `setLevel(level)`

è®¾ç½®æ—¥å¿—çº§åˆ«ã€‚

**å‚æ•°**ï¼š
- `level`: `LogLevel` - æ—¥å¿—çº§åˆ«

**ç¤ºä¾‹**ï¼š

```typescript
logger.setLevel("warn"); // åªè¾“å‡º warnã€errorã€fatal
```

##### `getLevel()`

è·å–å½“å‰æ—¥å¿—çº§åˆ«ã€‚

**è¿”å›**ï¼š`LogLevel` - å½“å‰æ—¥å¿—çº§åˆ«

**ç¤ºä¾‹**ï¼š

```typescript
const level = logger.getLevel(); // "info"
```

##### `setDebug(debug)`

è®¾ç½®è°ƒè¯•æ¨¡å¼ã€‚

**å‚æ•°**ï¼š
- `debug`: `boolean` - æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆtrue è¾“å‡ºæ—¥å¿—ï¼Œfalse ç¦ç”¨æ‰€æœ‰æ—¥å¿—ï¼‰

**ç¤ºä¾‹**ï¼š

```typescript
// å¼€å‘ç¯å¢ƒ
logger.setDebug(true);

// ç”Ÿäº§ç¯å¢ƒ
logger.setDebug(false);
```

##### `getDebug()`

è·å–è°ƒè¯•æ¨¡å¼çŠ¶æ€ã€‚

**è¿”å›**ï¼š`boolean` - å½“å‰è°ƒè¯•æ¨¡å¼çŠ¶æ€

**ç¤ºä¾‹**ï¼š

```typescript
const isDebug = logger.getDebug(); // true
```

##### `setPrefix(prefix)`

è®¾ç½®æ—¥å¿—å‰ç¼€ã€‚

**å‚æ•°**ï¼š
- `prefix`: `string` - æ—¥å¿—å‰ç¼€

**ç¤ºä¾‹**ï¼š

```typescript
logger.setPrefix("[MyApp]");
```

##### `getPrefix()`

è·å–æ—¥å¿—å‰ç¼€ã€‚

**è¿”å›**ï¼š`string` - å½“å‰æ—¥å¿—å‰ç¼€

**ç¤ºä¾‹**ï¼š

```typescript
const prefix = logger.getPrefix(); // "[MyApp]"
```

##### `child(config)`

åˆ›å»ºå­æ—¥å¿—å™¨ï¼ˆç»§æ‰¿é…ç½®ï¼Œå¯æ·»åŠ é¢å¤–å‰ç¼€ï¼‰ã€‚

**å‚æ•°**ï¼š
- `config`: `Partial<LoggerConfig>` - å­æ—¥å¿—å™¨é…ç½®

**è¿”å›**ï¼š`Logger` - å­æ—¥å¿—å™¨å®ä¾‹

**ç¤ºä¾‹**ï¼š

```typescript
const childLogger = logger.child({
  prefix: "[API]",
});

childLogger.info("API è¯·æ±‚"); // è¾“å‡º: [MyApp] [API] API è¯·æ±‚
```

### ç±»å‹å®šä¹‰

#### `LogLevel`

```typescript
type LogLevel = "debug" | "info" | "warn" | "error" | "fatal";
```

#### `LoggerConfig`

```typescript
interface LoggerConfig {
  /** æ—¥å¿—çº§åˆ«ï¼ˆé»˜è®¤ï¼šwarnï¼‰ */
  level?: LogLevel;
  /** æ—¥å¿—å‰ç¼€ï¼ˆé»˜è®¤ï¼šç©ºå­—ç¬¦ä¸²ï¼‰ */
  prefix?: string;
  /** æ˜¯å¦å¯ç”¨æ—¶é—´æˆ³ï¼ˆé»˜è®¤ï¼šfalseï¼‰ */
  timestamp?: boolean;
  /** æ˜¯å¦å¯ç”¨é¢œè‰²ï¼ˆé»˜è®¤ï¼štrueï¼Œæµè§ˆå™¨æ§åˆ¶å°æ”¯æŒ CSS æ ·å¼ï¼‰ */
  color?: boolean;
  /** æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆé»˜è®¤ï¼štrueï¼Œå¼€å‘ç¯å¢ƒä¸º true è¾“å‡ºæ‰€æœ‰æ—¥å¿—ï¼Œç”Ÿäº§ç¯å¢ƒä¸º false ç¦ç”¨æ‰€æœ‰æ—¥å¿—ï¼‰ */
  debug?: boolean;
}
```

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### å¼€å‘ç¯å¢ƒ

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯ç”¨æ‰€æœ‰æ—¥å¿—è¾“å‡ºï¼Œæ–¹ä¾¿è°ƒè¯•ï¼š

```typescript
const logger = createLogger({
  level: "debug", // è¾“å‡ºæ‰€æœ‰çº§åˆ«
  prefix: "[Dev]",
  color: true,
  debug: true,
  timestamp: true,
});
```

### ç”Ÿäº§ç¯å¢ƒ

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå®Œå…¨ç¦ç”¨æ—¥å¿—è¾“å‡ºï¼Œé¿å…æ€§èƒ½å½±å“ï¼š

```typescript
const logger = createLogger({
  debug: false, // ç¦ç”¨æ‰€æœ‰æ—¥å¿—
});
```

### æ¡ä»¶æ—¥å¿—è¾“å‡º

æ ¹æ®ç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®ï¼š

```typescript
const isDevelopment = import.meta.env?.MODE === "development";

const logger = createLogger({
  level: isDevelopment ? "debug" : "warn",
  debug: isDevelopment,
  color: isDevelopment,
});
```

### æ¨¡å—åŒ–æ—¥å¿—

ä¸ºä¸åŒæ¨¡å—åˆ›å»ºç‹¬ç«‹çš„æ—¥å¿—å™¨ï¼š

```typescript
const appLogger = createLogger({ prefix: "[App]" });
const apiLogger = appLogger.child({ prefix: "[API]" });
const dbLogger = appLogger.child({ prefix: "[DB]" });

appLogger.info("åº”ç”¨å¯åŠ¨");
apiLogger.info("API è¯·æ±‚");
dbLogger.info("æ•°æ®åº“æŸ¥è¯¢");
```

---

## ğŸ¨ æ—¥å¿—è¾“å‡ºç¤ºä¾‹

### å½©è‰²è¾“å‡ºï¼ˆæµè§ˆå™¨æ§åˆ¶å°ï¼‰

å¯ç”¨é¢œè‰²åï¼Œä¸åŒçº§åˆ«çš„æ—¥å¿—ä¼šæ˜¾ç¤ºä¸åŒçš„é¢œè‰²å’Œå›¾æ ‡ï¼š

- ğŸ” **DEBUG** - ç°è‰²
- â„¹ï¸ **INFO** - è“è‰²
- âš ï¸ **WARN** - æ©™è‰²ï¼ˆç²—ä½“ï¼‰
- âŒ **ERROR** - çº¢è‰²ï¼ˆç²—ä½“ï¼‰
- ğŸ’€ **FATAL** - æ·±çº¢è‰²ï¼ˆç²—ä½“ï¼Œå¸¦èƒŒæ™¯è‰²ï¼‰

### æ™®é€šè¾“å‡º

ç¦ç”¨é¢œè‰²åï¼Œä½¿ç”¨çº¯æ–‡æœ¬æ ¼å¼ï¼š

```
[2024-01-18T10:00:00.000Z] ğŸ” [DEBUG] [MyApp] è°ƒè¯•ä¿¡æ¯
[2024-01-18T10:00:00.000Z] â„¹ï¸ [INFO] [MyApp] åº”ç”¨å¯åŠ¨
[2024-01-18T10:00:00.000Z] âš ï¸ [WARN] [MyApp] è­¦å‘Šä¿¡æ¯
[2024-01-18T10:00:00.000Z] âŒ [ERROR] [MyApp] é”™è¯¯ä¿¡æ¯
[2024-01-18T10:00:00.000Z] ğŸ’€ [FATAL] [MyApp] è‡´å‘½é”™è¯¯
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

- **æµè§ˆå™¨ç¯å¢ƒä¸“ç”¨**ï¼šæ­¤å®¢æˆ·ç«¯æ—¥å¿—å™¨ä¸“ä¸ºæµè§ˆå™¨ç¯å¢ƒè®¾è®¡ï¼Œä½¿ç”¨ console API è¾“å‡º
- **ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®è®¾ç½® `debug: false` å®Œå…¨ç¦ç”¨æ—¥å¿—è¾“å‡ºï¼Œé¿å…æ€§èƒ½å½±å“
- **é¢œè‰²æ”¯æŒ**ï¼šå½©è‰²è¾“å‡ºä¾èµ–æµè§ˆå™¨æ§åˆ¶å°çš„ CSS æ ·å¼æ”¯æŒï¼Œæ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ
- **æ— æ–‡ä»¶è¾“å‡º**ï¼šå®¢æˆ·ç«¯æ—¥å¿—å™¨ä¸æ”¯æŒæ–‡ä»¶è¾“å‡ºï¼Œå¦‚éœ€æŒä¹…åŒ–æ—¥å¿—ï¼Œè¯·ä½¿ç”¨è¿œç¨‹æ—¥å¿—æœåŠ¡
- **è½»é‡çº§è®¾è®¡**ï¼šå®¢æˆ·ç«¯æ—¥å¿—å™¨è®¾è®¡ä¸ºè½»é‡çº§ï¼Œæ— å¤–éƒ¨ä¾èµ–ï¼Œé€‚åˆå‰ç«¯åº”ç”¨ä½¿ç”¨

---

## ğŸ“Š æµ‹è¯•è¦†ç›–

å®¢æˆ·ç«¯æ—¥å¿—å™¨ç»è¿‡å…¨é¢æµ‹è¯•ï¼ŒåŒ…å« 13 ä¸ªæµè§ˆå™¨ç¯å¢ƒæµ‹è¯•ç”¨ä¾‹ï¼Œå…¨éƒ¨é€šè¿‡ã€‚æµ‹è¯•ä½¿ç”¨ Puppeteer åœ¨çœŸå®æµè§ˆå™¨ç¯å¢ƒä¸­éªŒè¯æ‰€æœ‰åŠŸèƒ½ã€‚

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… æ—¥å¿—å™¨å®ä¾‹åˆ›å»º
- âœ… è‡ªå®šä¹‰é…ç½®ï¼ˆçº§åˆ«ã€å‰ç¼€ã€è°ƒè¯•æ¨¡å¼ã€é¢œè‰²ï¼‰
- âœ… æ—¥å¿—çº§åˆ«æ§åˆ¶ï¼ˆåŠ¨æ€è®¾ç½®ï¼‰
- âœ… è°ƒè¯•æ¨¡å¼æ§åˆ¶ï¼ˆåŠ¨æ€è®¾ç½®ï¼‰
- âœ… æ—¥å¿—å‰ç¼€ç®¡ç†
- âœ… å­æ—¥å¿—å™¨åˆ›å»º
- âœ… æ‰€æœ‰æ—¥å¿—çº§åˆ«æ–¹æ³•ï¼ˆdebugã€infoã€warnã€errorã€fatalï¼‰
- âœ… æ•°æ®å¯¹è±¡ä¼ é€’
- âœ… é”™è¯¯å¯¹è±¡ä¼ é€’
- âœ… å½©è‰²è¾“å‡ºï¼ˆå¯ç”¨æ—¶ï¼‰
- âœ… æ— é¢œè‰²è¾“å‡ºï¼ˆç¦ç”¨æ—¶ï¼‰

è¯¦ç»†æµ‹è¯•æŠ¥å‘Šè¯·æŸ¥çœ‹ [ä¸»æµ‹è¯•æŠ¥å‘Š](../../TEST_REPORT.md)ã€‚

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [ä¸»æ–‡æ¡£](../../README.md) - æœåŠ¡ç«¯æ—¥å¿—åº“æ–‡æ¡£
- [æµ‹è¯•æŠ¥å‘Š](../../TEST_REPORT.md) - å®Œæ•´æµ‹è¯•æŠ¥å‘Š
- [JSR åŒ…](https://jsr.io/@dreamer/logger) - JSR åŒ…é¡µé¢

---

<div align="center">

**Made with â¤ï¸ by Dreamer Team**

</div>
